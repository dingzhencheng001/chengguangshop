<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>商品列表</title>
    <script src="plugins/jquery/jquery-3.2.0.min.js"></script>
    <link rel="stylesheet" href="plugins/layui-v2.7.5/css/layui.css" media="all"/>
    <script src="plugins/layui-v2.7.5/layui.js"></script>

    <!-- 图标库 -->
    <link rel="stylesheet" href="plugins/font-awesome/css/font-awesome.min.css" media="all"/>
    <!-- ztree -->
    <link rel="stylesheet" href="plugins/ztree/css/metroStyle/metroStyle.css"/>
    <script src="plugins/ztree/js/jquery.ztree.all.js"></script>
    <!-- 下拉列表 -->
    <script src="js/common/combobox.js"></script>
    <script src="js/common/inputTree.js"></script>
    <!-- 全局属性 -->
    <script src="js/common/setting.js"></script>
    <script src="js/common/app.js"></script>
    <!-- css -->
    <link rel="stylesheet" href="css/app.css"/>
    <!-- 加载formSelects -->
    <link rel="stylesheet" href="plugins/formSelects/formSelects-v4.css"/>
    <script src="plugins/formSelects/formSelects-v4.js"></script>
    <link rel="stylesheet" href="css/console.css"/>
</head>
<body>
<div class="layui-card layui-bg-gray">
<!--    <div class="layui-card-header layui-anim layui-anim-fadein notselect"><span-->
<!--            class="layui-icon layui-icon-next font-s10 color-desc margin-right-5"></span>商品管理-->
<!--        <div class="pull-right">-->
<!--            <button data-open="/admin/deal/add_goods.html" data-title="添加公告" class="layui-btn">添加商品</button>-->
<!--        </div>-->
<!--    </div>-->
    <div class="layui-card-body layui-anim layui-anim-upbit">
        <div class="think-box-shadow">
            <fieldset>
                <legend>条件搜索</legend>
                <form class="layui-form layui-form-pane form-search" >
                    <div class="layui-form-item layui-inline">
                        <label class="layui-form-label">商品名称</label>
                        <div class="layui-input-inline">
                            <input name="goodsName" value="" placeholder="请输入商品名称" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item layui-inline">
                        <label class="layui-form-label">价格区间</label>
                        <div class="layui-input-inline">
                            <input type="text" name="minPrice" placeholder="最小" value="" autocomplete="off" class="layui-input">
                        </div>
                        <div class="layui-form-mid">-</div>
                        <div class="layui-input-inline"><input type="text" name="max_price" placeholder="最大" value=""
                                                               autocomplete="off" class="layui-input"></div>
                    </div>
                    <div class="layui-form-item layui-inline"><label class="layui-form-label">分类</label>
                        <div class="layui-input-inline">
                            <select name="cid" id="selectList">
                                <option value="">所有分类</option>
                                <option value="2">TaoBao</option>
                                <option value="3">Tmall</option>
                                <option value="4">JD</option>
                                <option value="1">Pinduoduo</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item layui-inline">
                        <button class="layui-btn layui-btn-primary"><i class="layui-icon"></i> 搜 索</button>
                    </div>
                </form>
            </fieldset>
            <table id="tableId" lay-filter="tableId" style="margin-top: 5px"></table>
        </div>
        <script>
            function del_goods(id) {
                layer.confirm("确认要删除吗，删除后不能恢复", {title: "删除确认"}, function (index) {
                    $.ajax({
                        type: 'POST',
                        url: "/admin/deal/del_goods.html",
                        data: {
                            'id': id,
                            '_csrf_': "62da64056832f"
                        },
                        success: function (res) {
                            layer.msg(res.info, {time: 2500});
                            location.reload();
                        }
                    });
                }, function () {
                });
            }
        </script>
    </div>
</div>

<!--添加时间-->
<script type="text/html" id="goodsAddTime">
    <div>{{ layui.util.toDateString(d.goodsAddTime, 'yyyy年MM月dd日 HH:mm:ss')}}</div>
</script>

<script>
    layui.use(['table', 'form', 'util', 'element', 'laydate'], function () {
        var table = layui.table, $ = layui.$, form = layui.form, util = layui.util;
        var element = layui.element;
        var laydate = layui.laydate;
        var where = {

        };

        var tableId = 'tableId';
        table.render(Object.assign({}, $.tableRenderConfing, {
            elem: '#tableId',
            url: 'http://localhost:8080/goods/list', //数据接口
            cellMinWidth: 100, //全局定义常规单元格的最小宽度
            // method: 'post',
            // contentType: 'application/json',
            page: true, //开启分页
            where: where,
            // lineStyle: 'height: 100px;',
            // 商品名称	商品价格	店铺名称	添加时间	状态
            cols: [[ //表头
                {field: 'id', title: '商品ID', sort: true}
                , {field: 'goodsPrice', title: '商品价格'}
                , {field: 'shopName', title: '店铺名称'}
                , {field: 'goodsAddTime', title: '添加时间', width: 180, templet: '#goodsAddTime'}
                , {field: 'status', title: '状态', width: 120, templet: function (d) {
                        // 上架状态 0不上架 1上架
                        return d.status === 0 ? '不上架' : '上架'
                    }}
            ]],
            id: tableId, // 容器唯一ID
        } ));

    });
    // tableId
</script>
</body>
</html>